# This file is part of JSC's public easybuild repository (https://github.com/easybuilders/jsc)
easyblock = 'PythonBundle'

name = 'jupyter-ai'
version = '2.12.0'

homepage = "https://jupyter-ai.readthedocs.io"

description = """
A generative AI extension for JupyterLab.
"""

toolchain = {'name': 'GCCcore', 'version': '12.3.0'}

builddependencies = [
    ('binutils', '2.40'),
    ('Rust', '1.70.0'),
    ('setuptools-rust', '1.6.0'),
    ('poetry', '1.5.1'),
    ('maturin', '1.4.0', '-Rust-1.70.0'),
]

dependencies = [
    ('Python', '3.11.3'),
    ('JupyterLab', '4.1.5'),
    ('SciPy-bundle', '2023.07', '', ('gcccoreflexiblas', '12.3.0-3.3.1')),
    ('aiohttp', '3.9.3'),
    ('dask', '2023.9.2', '-serial', ('gcccoreflexiblas', '12.3.0-3.3.1')),
    ('tqdm', '4.66.1'),
    ('Pillow-SIMD', '9.5.0'),
    ('boto3', '1.28.70'),
]

sanity_pip_check = True
use_pip = True

exts_list = [
    ('faiss_cpu', '1.8.0', {
        'modulename': False,
        'source_tmpl': '%(name)s-%(version)s-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl',
        'checksums': ['b644b366c3b239b34fa3e08bf65bfc78a24eda1e1ea5b2b6d9be3e8fc73d8179'],
    }),
    ('orjson', '3.9.15', {
        'source_tmpl': '%(name)s-%(version)s-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl',
        'checksums': ['12365576039b1a5a47df01aadb353b68223da413e2e7f98c02403061aad34bde'],
    }),
    ('mypy_extensions', '1.0.0', {
        'checksums': ['75dbf8955dc00442a438fc4d0666508a9a97b6bd41aa2f0ffe9d2f2725af0782'],
    }),
    ('greenlet', '3.0.3', {
        'checksums': ['43374442353259554ce33599da8b692d5aa96f8976d567d4badf263371fbe491'],
    }),
    ('jsonpointer', '2.4', {
        'checksums': ['585cee82b70211fa9e6043b7bb89db6e1aa49524340dde8ad6b63206ea689d88'],
    }),
    ('annotated_types', '0.6.0', {
        'checksums': ['563339e807e53ffd9c267e99fc6d9ea23eb8443c08f112651963e24e22f84a5d'],
    }),
    ('pydantic_core', '2.16.3', {
        'source_tmpl': '%(name)s-%(version)s-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl',
        'checksums': ['a6b1bb0827f56654b4437955555dc3aeeebeddc47c2d7ed575477f082622c49e'],
    }),
    ('jsonpatch', '1.33', {
        'checksums': ['9fcd4009c41e6d12348b4a0ff2563ba56a2923a7dfee731d004e212e1ee5030c'],
    }),
    ('typing_inspect', '0.9.0', {
        'checksums': ['b23fc42ff6f6ef6954e4852c1fb512cdd18dbea03134f91f856a95ccc9461f78'],
    }),
    ('marshmallow', '3.21.1', {
        'checksums': ['4e65e9e0d80fc9e609574b9983cf32579f305c718afb30d7233ab818571768c3'],
    }),
    ('dataclasses_json', '0.6.4', {
        'source_tmpl': '%(name)s-%(version)s-py3-none-any.whl',
        'checksums': ['f90578b8a3177f7552f4e1a6e535e84293cd5da421fcce0642d49c0d7bdf8df2'],
    }),
    ('tenacity', '8.2.3', {
        'checksums': ['5398ef0d78e63f40007c1fb4c0bff96e1911394d2fa8d194f77619c05ff6cc8a'],
    }),
    ('SQLAlchemy', '2.0.28', {
        'checksums': ['dd53b6c4e6d960600fd6532b79ee28e2da489322fcf6648738134587faf767b6'],
    }),
    ('pydantic', '2.6.4', {
        'checksums': ['b1704e0847db01817624a6b86766967f552dd9dbf3afba4004409f908dcc84e6'],
    }),
    ('langsmith', '0.1.26', {
        'checksums': ['121e5334b2267dc6e2705c2b219aeda7595b3abf004a9a83504d4c46c1894565'],
    }),
    ('langchain_core', '0.1.32', {
        'source_tmpl': '%(name)s-%(version)s-py3-none-any.whl',
        'checksums': ['192aecdee6216af19b596ec18e7be3da0b9ecb9083eec263e02b68125737245d'],
    }),
    ('langchain_text_splitters', '0.0.1', {
        'checksums': ['ac459fa98799f5117ad5425a9330b21961321e30bc19a2a2f9f761ddadd62aa1'],
    }),
    ('langchain_community', '0.0.28', {
        'checksums': ['8664d243a90550fc5ddc137b712034e02c8d43afc8d4cc832ba5842b44c864ce'],
    }),
    ('packaging', '23.2', {
        'checksums': ['048fb0e9405036518eaaf48a55953c750c11e1a1b68e0dd1a9d62ed0c092cfc5'],
    }),
    ('langchain', '0.1.12', {
        'source_tmpl': '%(name)s-%(version)s-py3-none-any.whl',
        'checksums': ['b4dd1760e2d035daefad08af60a209b96b729ee45492d34e3e127e553a471034'],
    }),
    ('deepmerge', '1.1.1', {
        'checksums': ['53a489dc9449636e480a784359ae2aab3191748c920649551c8e378622f0eca4'],
    }),
    ('webcolors', '1.13', {
        'checksums': ['c225b674c83fa923be93d235330ce0300373d02885cef23238813b0d5668304a'],
    }),
    ('uri-template', '1.3.0', {
        'checksums': ['0e00f8eb65e18c7de20d595a14336e9f337ead580c70934141624b6d1ffdacc7'],
    }),
    ('types-python-dateutil', '2.9.0.20240315', {
        'modulename': False,
        'checksums': ['c1f6310088eb9585da1b9f811765b989ed2e2cdd4203c1a367e944b666507e4e'],
    }),
    ('jsonpath-ng', '1.6.1', {
        'checksums': ['086c37ba4917304850bd837aeab806670224d3f038fe2833ff593a672ef0a5fa'],
    }),
    ('fqdn', '1.5.1', {
        'checksums': ['105ed3677e767fb5ca086a0c1f4bb66ebc3c100be518f0e0d755d9eae164d89f'],
    }),
    ('aiosqlite', '0.20.0', {
        'checksums': ['6d35c8c256637f4672f843c31021464090805bf925385ac39473fb16eaaca3d7'],
    }),
    ('tiktoken', '0.6.0', {
        'checksums': ['ace62a4ede83c75b0374a2ddfa4b76903cf483e9cb06247f566be3bf14e6beed'],
    }),
    ('arrow', '1.3.0', {
        'checksums': ['d4540617648cb5f895730f1ad8c82a65f2dad0166f57b75f3ca54759c4d67a85'],
    }),
    ('isoduration', '20.11.0', {
        'checksums': ['ac2f9015137935279eac671f94f89eb00584f940f5dc49462a0c4ee692ba1bd9'],
    }),
    ('jupyter_ai_magics', version, {
        'checksums': ['41eb47bdb6526e3edd494a1d2854744e4fb77e1b88e40360ffb944a446851882'],
    }),
    ('jupyter_ai', version, {
        'checksums': ['c5ad7449de8f5a11e5fc8af39c7099804828bce9cb67939f0e1383802fd2ab9b'],
    }),
    ('huggingface_hub', '0.21.4', {
        'checksums': ['e1f4968c93726565a80edf6dc309763c7b546d0cfe79aa221206034d50155531'],
    }),
    ('typing_extensions', '4.10.0', {
        'checksums': ['b0abd7c89e8fb96f98db18d86106ff1d90ab692004eb746cf6eda2682f91b3cb'],
    }),
    ('openai', '1.14.1', {
        'checksums': ['1fab5dd623cdc0c7c6e7da5d8d11fa6900f94191c2dfb6510d7eac33195fa175'],
    }),
]

modextrapaths = {
    'JUPYTER_CONFIG_PATH': 'etc/jupyter',
    'JUPYTER_PATH': 'share/jupyter',
}

moduleclass = 'tools'
